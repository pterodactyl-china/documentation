import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as m,c as u,d as i,w as a,a as e,e as n,b as d}from"./app-ZTIMksiV.js";const b="/assets/bt_1-CLlDCLNV.png",c="/assets/bt_3-Cz1WDvX3.jpg",v="/assets/bt_4-B7AB9XGX.png",g="/assets/bt_5-FNMMC3pu.png",k="/assets/bt_6-DVDhdiLr.png",_="/assets/bt_2-DjETNVWu.png",w={},f=e("h1",{id:"使用宝塔-bt-panel-面板搭建",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#使用宝塔-bt-panel-面板搭建"},[e("span",null,"使用宝塔（BT-Panel）面板搭建")])],-1),x=d(`<p>翼龙面板运行在您自己的 Web 服务器上。为了运行和使用这个面板，您需要对您的服务器具有 root 访问权限。</p><p>您需要了解如何阅读文档以使用此面板。我们花了很多时间详细介绍如何安装或升级我们的软件； 所以你也要花点时间去阅读而不是复制粘贴，然后在事情不起作用时候而抱怨。 此面板不作为运行服务器的拖放服务存在。 这是一个高度复杂的系统，需要多个依赖项，并且使用搭建他的网站管理人员需要付出一些时间学习如何使用它。<br><strong>如果您希望能够在一点一点一点都不了解基本 linux 系统管理的情况下来搭建翼龙面板，您现在应该停下来然后出门左拐。</strong></p><h2 id="选择服务器操作系统" tabindex="-1"><a class="header-anchor" href="#选择服务器操作系统"><span>选择服务器操作系统</span></a></h2><p>翼龙可在多种操作系统上运行，因此请选择最适合您使用的操作系统。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>Pterodactyl 不支持大多数 OpenVZ 系统，因为它与 Docker 不兼容。如果你计划在基于 OpenVZ 的系统上运行这个软件，你很可能不会成功。<br> 不过翼龙面板前端就没那么需求了，只要阁下前端服务器能装 <code>BT-Panel</code>，和 <code>LNMP</code> 或者 <code>LAMP</code>，就可以用来搭建翼龙面板前端了。一般服务器均能满足前端的搭建要求。</p></div><table><thead><tr><th>操作系统</th><th>版本</th><th style="text-align:center;">支持状况</th><th>注意事项</th></tr></thead><tbody><tr><td><strong>Ubuntu</strong></td><td>20.04</td><td style="text-align:center;">✅</td><td>文档以 Ubuntu 20.04 操作系统为基本所编写的。</td></tr><tr><td></td><td>22.04</td><td style="text-align:center;">✅</td><td>MariaDB 无需 repo 安装脚本即可安装。</td></tr><tr><td><strong>CentOS</strong></td><td>7</td><td style="text-align:center;">✅</td><td>需要额外的 repos。</td></tr><tr><td></td><td>8</td><td style="text-align:center;">✅</td><td>注意，CentOS 8 已停运。使用 Rocky 或 Alma Linux。</td></tr><tr><td><strong>Debian</strong></td><td>10</td><td style="text-align:center;">✅</td><td></td></tr><tr><td></td><td>11</td><td style="text-align:center;">✅</td><td></td></tr></tbody></table><h2 id="安装宝塔面板" tabindex="-1"><a class="header-anchor" href="#安装宝塔面板"><span>安装宝塔面板</span></a></h2><p>此界面提供的安装脚本具有时间局限性，可能落后于官方最新版本，有条件的话请去宝塔官网查看</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># Centos安装脚本</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> install.sh https://download.bt.cn/install/install_6.0.sh <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span> install.sh ed8484bec

<span class="token comment"># Ubuntu/Deepin安装脚本</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">bash</span> install.sh ed8484bec

<span class="token comment"># Debian安装脚本</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> install.sh ed8484bec

<span class="token comment"># 万能安装脚本</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /usr/bin/curl <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span> <span class="token function">curl</span> <span class="token parameter variable">-sSO</span> https://download.bt.cn/install/install_panel.sh<span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> install_panel.sh https://download.bt.cn/install/install_panel.sh<span class="token punctuation">;</span><span class="token keyword">fi</span><span class="token punctuation">;</span><span class="token function">bash</span> install_panel.sh ed8484bec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装lnmp或lamp基础环境" tabindex="-1"><a class="header-anchor" href="#安装lnmp或lamp基础环境"><span>安装LNMP或LAMP基础环境</span></a></h2><p><code>LNMP</code> 和 <code>LAMP</code> 分别代表着 <code>Linux</code> <code>Nginx\\Apache</code> <code>Mysql</code> <code>PHP</code><br> 阁下选择版本请务必保证 <code>PHP</code>版本 &gt;= <code>8.1</code>、 <code>MySQL</code>版本 &gt;= <code>5.7</code><br> 这一般会在阁下第一次登录宝塔面板时提示安装，我不在此赘述，若阁下错过提示，可点击 <code>软件商店</code> 自行安装<br> 在安装完毕后，在 <code>PHP</code> 的<strong>禁用函数</strong>里删除 <code>putenv</code>、 <code>exec</code>、 <code>proc_open</code>、 <code>shell_exec</code>，并且在扩展里安装 <code>fileinfo</code> <code>redis</code></p><h2 id="新建站点并开始构建" tabindex="-1"><a class="header-anchor" href="#新建站点并开始构建"><span>新建站点并开始构建</span></a></h2><h3 id="新建站点" tabindex="-1"><a class="header-anchor" href="#新建站点"><span>新建站点</span></a></h3><p>我觉得你应该会使用宝塔面板来新建一个网站</p><figure><img src="`+b+'" alt="如果你看到我说明图挂了" tabindex="0" loading="lazy"><figcaption>如果你看到我说明图挂了</figcaption></figure><h3 id="下载并上传程序文件至网站目录" tabindex="-1"><a class="header-anchor" href="#下载并上传程序文件至网站目录"><span>下载并上传程序文件至网站目录</span></a></h3>',16),y=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,`https://github.com/pterodactyl-china/panel/releases/latest/download/panel.tar.gz
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),P=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,`https://mirror.ghproxy.com/https://github.com/pterodactyl-china/panel/releases/latest/download/panel.tar.gz
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),C=d('<h3 id="进入网站目录解压程序文件并设置环境文件" tabindex="-1"><a class="header-anchor" href="#进入网站目录解压程序文件并设置环境文件"><span>进入网站目录解压程序文件并设置环境文件</span></a></h3><p>现在所有文件都已下载，我们需要进入网站目录解压刚刚上传的 <code>panel.tar.gz</code> 压缩包</p><p>然后将 <code>.env.example</code> 文件重命名为 <code>.env</code></p><h3 id="使用-composer-安装相关依赖" tabindex="-1"><a class="header-anchor" href="#使用-composer-安装相关依赖"><span>使用 Composer 安装相关依赖</span></a></h3><p>点击 网站的 <code>设置</code> ，再点击 <code>设置</code> 里的 <code>Composer</code><br><img src="'+c+'" alt="如果你看到我说明图挂了" loading="lazy"><img src="'+v+`" alt="如果你看到我说明图挂了" loading="lazy"></p><p>先点击 <code>升级Composer</code> 确保其为最新版本，并按红圈所示选择<br> 在 <code>补充命令</code> 中输入以下命令后点击 <code>执行</code> ，等待命令执行完成后关闭窗口即可。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>composer install --no-dev --optimize-autoloader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>在进行以下步骤之前，请阁下为面板前端新建一个数据库，我相信阁下的聪明脑袋一定会用宝塔面板新建一个数据库吧。</p></div><h3 id="伪静态及二级目录设置" tabindex="-1"><a class="header-anchor" href="#伪静态及二级目录设置"><span>伪静态及二级目录设置</span></a></h3><p>点击 网站的 <code>设置</code> ，进入设置界面 <img src="`+c+'" alt="如果你看到我说明图挂了" loading="lazy"></p><h4 id="伪静态设置" tabindex="-1"><a class="header-anchor" href="#伪静态设置"><span>伪静态设置</span></a></h4><p>点击 <code>设置</code> 里的 <code>伪静态</code><br><img src="'+g+'" alt="如果你看到我说明图挂了" loading="lazy"></p><p>先点击左上角的伪静态模板，并使用 <code>laravel5</code> 伪静态模板 点击 <code>保存</code> 即可设置成功。</p><h4 id="二级目录设置" tabindex="-1"><a class="header-anchor" href="#二级目录设置"><span>二级目录设置</span></a></h4><p>点击 <code>设置</code> 里的 <code>网站目录</code><br><img src="'+k+`" alt="如果你看到我说明图挂了" loading="lazy"></p><p>点击 <code>运行目录</code> 一栏，并选择 <code>/public</code> 点击 <code>保存</code> 即可设置成功。</p><h3 id="生成app-key并进行环境配置" tabindex="-1"><a class="header-anchor" href="#生成app-key并进行环境配置"><span>生成APP_KEY并进行环境配置</span></a></h3><p>现在我们要开始输入一些指令了，请阁下先记住在宝塔新建站点时设置的站点目录</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#进入站点目录</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">{</span>阁下在宝塔新建站点时设置的站点目录<span class="token punctuation">}</span>
<span class="token comment"># 例如 cd /www/wwwroot/pterodactyl</span>

<span class="token comment"># 注意，以下指令仅针对于第一次安装部署翼龙面板前端</span>
<span class="token comment"># 且对应数据库内无数据时执行，若阁下并非第一次安装且数据库内有数据，请忽略此指令</span>
php artisan key:generate <span class="token parameter variable">--force</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#下面两个指令是设置一些基础信息和数据库配置，阁下应该在此步骤之前为面板前端新建一个数据库</span>
php artisan p:environment:setup
php artisan p:environment:database

<span class="token comment"># 下面这个指令是配置面板的发件系统，如果阁下不需要可忽略</span>
<span class="token comment"># 若使用 PHP 自带的 mail 拓展 (不推荐使用), 请在执行以下指令后选择 &quot;mail&quot;。</span>
<span class="token comment"># 若使用自定义 SMTP 服务器，请在执行以下指令后选择 &quot;smtp&quot;。</span>
php artisan p:environment:mail
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在我们要将面板所有的核心数据写入我们之前为面板准备的数据库内。</p><p><strong>此步骤可能花费较长时间来进行执行，花费的时间取决于您的主机性能，主机与数据库主机的网络连接状态等因素。请耐心等待数据导入完成，切勿中途使用 CTRL+C 强制中断执行！</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>php artisan migrate <span class="token parameter variable">--seed</span> <span class="token parameter variable">--force</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="添加首位用户" tabindex="-1"><a class="header-anchor" href="#添加首位用户"><span>添加首位用户</span></a></h3><p>数据库配置完成后，您需要为面板创建一个管理用户，以便您可以登录面板。 为此，请运行以下命令。 并保证账户密码满足以下要求：8 个字符，大小写混合，至少一个数字。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>php artisan p:user:make
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="设置程序文件权限" tabindex="-1"><a class="header-anchor" href="#设置程序文件权限"><span>设置程序文件权限</span></a></h3><p>我们需要进入网站目录并全选设置文件权限为 <code>755</code> 所有者为 <code>www</code></p><figure><img src="`+_+`" alt="如果你看到我说明图挂了" tabindex="0" loading="lazy"><figcaption>如果你看到我说明图挂了</figcaption></figure><h2 id="注册队列监听服务" tabindex="-1"><a class="header-anchor" href="#注册队列监听服务"><span>注册队列监听服务</span></a></h2><p>我们使用队列来使应用程序更快，并在后台处理发送电子邮件和其他操作。您需要设置工作队列以处理这些操作。</p><h3 id="crontab-定时任务设置" tabindex="-1"><a class="header-anchor" href="#crontab-定时任务设置"><span>Crontab 定时任务设置</span></a></h3><p>我们需要做的第一件事是创建一个新的 Cronjob，它每分钟运行一次以处理特定的任务，例如会话清理并将计划任务发送到守护进程。 您需要使用 <code>sudo crontab -e</code> 打开您的 <code>crontab</code>，然后将以下字符串以新一行粘贴进去，并保存更改。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>* * * * * php /www/wwwroot/pterodactyl/artisan schedule:run <span class="token operator">&gt;&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="创建队列监听服务" tabindex="-1"><a class="header-anchor" href="#创建队列监听服务"><span>创建队列监听服务</span></a></h3><p>接下来，您需要创建一个新的 systemd 来保持我们的队列进程在后台运行。 该队列负责发送电子邮件并为翼龙面板处理许多其他后台任务。</p><p>在 <code>/etc/systemd/system</code> 文件夹中创建一个名为 <code>pteroq.service</code> 的文件，其内容如下。</p>`,37),B=e("div",{class:"language-text line-numbers-mode","data-ext":"text","data-title":"text"},[e("pre",{text:"",class:"language-text"},[e("code",null,`# 翼龙工作队列文件
# ----------------------------------

[Unit]
Description=Pterodactyl Queue Worker
# After=redis-server.service

[Service]
# 在某些系统上用户和组可能不同。
# 有些系统使用 \`apache\` 或 \`nginx\` 作为用户和组。
User=www
Group=www
Restart=always
ExecStart=/usr/bin/php /www/wwwroot/pterodactyl/artisan queue:work --queue=high,standard,low --sleep=3 --tries=3
StartLimitInterval=180
StartLimitBurst=30
RestartSec=5s

[Install]
WantedBy=multi-user.target
`)]),e("div",{class:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{class:"highlight-line"}," "),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{class:"highlight-line"}," "),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),L=d(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>你在 <code>PHP</code> 安装 <code>redis</code> 拓展时应该自动安装了 <code>redis</code> 并启动了，但如果发现 应用商店中没有或未启动 <code>redis</code> ，你应该启动它。<br> 如果你的面板路径并不是 <code>/www/wwwroot/pterodactyl/</code>，请替换为你面板的绝对路径，否则邮件服务将无法使用。<br> 如果你宝塔默认命令行使用的并不是 <code>8.1</code>PHP 可以尝试使用绝对路径，将 <code>/usr/bin/php</code> 改为 <code>/www/server/php/81/bin/php</code></p></div><p>最后，启动队列监听服务并设置开启自动启动</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> pteroq.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),T={id:"下一步-wings-后端-安装",tabindex:"-1"},z={class:"header-anchor",href:"#下一步-wings-后端-安装"};function A(M,N){const o=l("BiliBili"),r=l("Tabs"),p=l("RouteLink");return m(),u("div",null,[f,i(o,{bvid:"BV1CW4y1b7fc"}),x,i(r,{id:"154",data:[{id:"国际源"},{id:"国内源"}],active:1,"tab-id":"fruit"},{title0:a(({value:s,isActive:t})=>[n("国际源")]),title1:a(({value:s,isActive:t})=>[n("国内源")]),tab0:a(({value:s,isActive:t})=>[y]),tab1:a(({value:s,isActive:t})=>[P]),_:1}),C,B,L,e("h4",T,[e("a",z,[e("span",null,[n("下一步："),i(p,{to:"/wings/1.0/installing.html"},{default:a(()=>[n("Wings (后端) 安装")]),_:1})])])])])}const q=h(w,[["render",A],["__file","btpanel_getstarted.html.vue"]]),O=JSON.parse('{"path":"/panel/1.0/btpanel_getstarted.html","title":"使用宝塔（BT-Panel）面板搭建","lang":"zh-CN","frontmatter":{"description":"使用宝塔（BT-Panel）面板搭建","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/panel/1.0/btpanel_getstarted.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"使用宝塔（BT-Panel）面板搭建"}],["meta",{"property":"og:description","content":"使用宝塔（BT-Panel）面板搭建"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-17T00:57:54.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-17T00:57:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用宝塔（BT-Panel）面板搭建\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-17T00:57:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"选择服务器操作系统","slug":"选择服务器操作系统","link":"#选择服务器操作系统","children":[]},{"level":2,"title":"安装宝塔面板","slug":"安装宝塔面板","link":"#安装宝塔面板","children":[]},{"level":2,"title":"安装LNMP或LAMP基础环境","slug":"安装lnmp或lamp基础环境","link":"#安装lnmp或lamp基础环境","children":[]},{"level":2,"title":"新建站点并开始构建","slug":"新建站点并开始构建","link":"#新建站点并开始构建","children":[{"level":3,"title":"新建站点","slug":"新建站点","link":"#新建站点","children":[]},{"level":3,"title":"下载并上传程序文件至网站目录","slug":"下载并上传程序文件至网站目录","link":"#下载并上传程序文件至网站目录","children":[]},{"level":3,"title":"进入网站目录解压程序文件并设置环境文件","slug":"进入网站目录解压程序文件并设置环境文件","link":"#进入网站目录解压程序文件并设置环境文件","children":[]},{"level":3,"title":"使用 Composer 安装相关依赖","slug":"使用-composer-安装相关依赖","link":"#使用-composer-安装相关依赖","children":[]},{"level":3,"title":"伪静态及二级目录设置","slug":"伪静态及二级目录设置","link":"#伪静态及二级目录设置","children":[]},{"level":3,"title":"生成APP_KEY并进行环境配置","slug":"生成app-key并进行环境配置","link":"#生成app-key并进行环境配置","children":[]},{"level":3,"title":"添加首位用户","slug":"添加首位用户","link":"#添加首位用户","children":[]},{"level":3,"title":"设置程序文件权限","slug":"设置程序文件权限","link":"#设置程序文件权限","children":[]}]},{"level":2,"title":"注册队列监听服务","slug":"注册队列监听服务","link":"#注册队列监听服务","children":[{"level":3,"title":"Crontab 定时任务设置","slug":"crontab-定时任务设置","link":"#crontab-定时任务设置","children":[]},{"level":3,"title":"创建队列监听服务","slug":"创建队列监听服务","link":"#创建队列监听服务","children":[]}]}],"git":{"createdTime":1657022165000,"updatedTime":1713315474000,"contributors":[{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":30},{"name":"ilworkcn","email":"1061372739@qq.com","commits":2},{"name":"Wapriaily","email":"kano@wapriaily.com","commits":1}]},"readingTime":{"minutes":7.06,"words":2119},"filePathRelative":"panel/1.0/btpanel_getstarted.md","localizedDate":"2022年7月5日","autoDesc":true}');export{q as comp,O as data};
