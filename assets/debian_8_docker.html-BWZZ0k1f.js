import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as d,c as l,a as e,d as t,w as s,e as a,b as c}from"./app-jqRUl9Zf.js";const p={},u=e("h1",{id:"docker-on-debian-8",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#docker-on-debian-8"},[e("span",null,"Docker on Debian 8")])],-1),m={class:"table-of-contents"},h=e("div",{class:"hint-container warning"},[e("p",{class:"hint-container-title"},"注意"),e("p",null,"There is a potential for broken software after this upgrade as we are moving to a non-stable kernel (in regards to mainline Debian). Please take backups and only proceed if you are comfortable with this process.")],-1),b=e("h2",{id:"install-docker",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#install-docker"},[e("span",null,"Install Docker")])],-1),k={href:"https://docs.docker.com/install/linux/docker-ce/debian/#install-docker-ce",target:"_blank",rel:"noopener noreferrer"},g=c(`<p>Once you&#39;ve done that, if you run <code>docker info</code> you&#39;ll notice some missing features at the bottom, something like the output below.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>WARNING: No memory limit support
WARNING: No swap limit support
WARNING: No kernel memory limit support
WARNING: No oom kill disable support
WARNING: No cpu cfs quota support
WARNING: No cpu cfs period support
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="update-grub-startup" tabindex="-1"><a class="header-anchor" href="#update-grub-startup"><span>Update GRUB Startup</span></a></h2><p>To fix the memory limit support issues, we just need to add two arguments to our default grub startup. Start by opening <code>/etc/default/grub</code> and adding the following arguments to <code>GRUB_CMDLINE_LINUX_DEFAULT</code>.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>swapaccount=1 cgroup_enable=memory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The line should then look like the one below — assuming nothing else was in the quote to begin with.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;swapaccount=1 cgroup_enable=memory&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>After doing that, run <code>sudo update-grub</code> to update our grub configuration.</p><h2 id="add-backports-repo" tabindex="-1"><a class="header-anchor" href="#add-backports-repo"><span>Add Backports Repo</span></a></h2><p>We then need to enable the <code>jessie-backports</code> apt repository to install a newer kernel. To do this, run the commands below.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> deb http://http.debian.net/debian jessie-backports main <span class="token operator">&gt;</span> /etc/apt/sources.list.d/jessie-backports.list
<span class="token builtin class-name">echo</span> deb http://http.debian.net/debian jessie-backports main contrib non-free <span class="token operator">&gt;</span> /etc/apt/sources.list.d/jessie-backports.list
<span class="token function">sudo</span> <span class="token function">apt</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To find the most recent kernels, run <code>apt-cache search linux-image</code> which will list all of the ones available. In this case, we&#39;ll install the <code>4.9.0</code> kernel using the command below. Once we&#39;ve done that, it is time to reboot the server to start using this kernel.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-t</span> jessie-backports linux-image-4.9.0-0.bpo.3-amd64
<span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="update-software-setup-docker" tabindex="-1"><a class="header-anchor" href="#update-software-setup-docker"><span>Update Software &amp; Setup Docker</span></a></h2><p>Now that we&#39;re on the new kernel you probably need to update some software to take advantage of it. To do this, simply run the command below.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> upgrade
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Once that is done, we need to make an adjustment to docker to use <code>overlay2</code> rather than <code>aufs</code> since <code>aufs</code> is not supported on this kernel currently. Run the command below to do so.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s,/usr/bin/dockerd,/usr/bin/dockerd --storage-driver=overlay2,g&#39;</span> /lib/systemd/system/docker.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Finally, update <code>systemd</code> and start docker using the following commands.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>systemctl daemon-reload
<span class="token function">service</span> <span class="token function">docker</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Docker should now be running and reporting no errors if you run <code>docker info</code>!</p>`,21);function v(f,_){const n=o("router-link"),i=o("ExternalLinkIcon");return d(),l("div",null,[u,e("nav",m,[e("ul",null,[e("li",null,[t(n,{to:"#install-docker"},{default:s(()=>[a("Install Docker")]),_:1})]),e("li",null,[t(n,{to:"#update-grub-startup"},{default:s(()=>[a("Update GRUB Startup")]),_:1})]),e("li",null,[t(n,{to:"#add-backports-repo"},{default:s(()=>[a("Add Backports Repo")]),_:1})]),e("li",null,[t(n,{to:"#update-software-setup-docker"},{default:s(()=>[a("Update Software & Setup Docker")]),_:1})])])]),h,b,e("p",null,[a("To begin with, we're going to install docker just like we would for any other OS by following Docker's "),e("a",k,[a("official documentation for Debian"),t(i)]),a(".")]),g])}const x=r(p,[["render",v],["__file","debian_8_docker.html.vue"]]),D=JSON.parse('{"path":"/daemon/0.6/debian_8_docker.html","title":"Docker on Debian 8","lang":"zh-CN","frontmatter":{"description":"Docker on Debian 8 注意 There is a potential for broken software after this upgrade as we are moving to a non-stable kernel (in regards to mainline Debian). Please take backups an...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/daemon/0.6/debian_8_docker.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Docker on Debian 8"}],["meta",{"property":"og:description","content":"Docker on Debian 8 注意 There is a potential for broken software after this upgrade as we are moving to a non-stable kernel (in regards to mainline Debian). Please take backups an..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-13T13:28:57.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-13T13:28:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker on Debian 8\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-13T13:28:57.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Install Docker","slug":"install-docker","link":"#install-docker","children":[]},{"level":2,"title":"Update GRUB Startup","slug":"update-grub-startup","link":"#update-grub-startup","children":[]},{"level":2,"title":"Add Backports Repo","slug":"add-backports-repo","link":"#add-backports-repo","children":[]},{"level":2,"title":"Update Software & Setup Docker","slug":"update-software-setup-docker","link":"#update-software-setup-docker","children":[]}],"git":{"createdTime":1532761043000,"updatedTime":1713014937000,"contributors":[{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.46,"words":438},"filePathRelative":"daemon/0.6/debian_8_docker.md","localizedDate":"2018年7月28日","autoDesc":true}');export{x as comp,D as data};
