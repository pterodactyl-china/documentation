import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as n,o as a}from"./app-DPNkEWqQ.js";const o={};function s(r,e){return a(),t("div",null,e[0]||(e[0]=[n(`<h1 id="environment-configuration" tabindex="-1"><a class="header-anchor" href="#environment-configuration"><span>Environment Configuration</span></a></h1><p>Pterodactyl&#39;s environment settings are configured and stored in an environment file — <code>.env</code> — located in the installation root directory — generally <code>/var/www/pterodactyl</code>. Some of these settings are also stored in the database and will override settings found in the environment file.</p><p>To change this behavior you can edit the <code>.env</code> file and change the setting <code>APP_ENVIRONMENT_ONLY=false</code> to <code>APP_ENVIRONMENT_ONLY=true</code> which will take effect the next time you refresh a page on the Panel. Generally you will only need to do this if you severly corrupt a setting in the Panel or are deep in development with the software.</p><h2 id="reporting-all-exceptions" tabindex="-1"><a class="header-anchor" href="#reporting-all-exceptions"><span>Reporting All Exceptions</span></a></h2><p>By default Pterodactyl only logs and reports exceptions that are, well, exceptional by nature. There are some exceptions that we expect to occur such as authentication failures or validation issues. However, in rare instances when developing, or even on production servers, you might need to have all exceptions logged to detect inconsistent behavior.</p><p>To do this, simply set <code>APP_REPORT_ALL_EXCEPTIONS=true</code> in your <code>.env</code> file. You&#39;ll want to turn this off once you&#39;ve completed whatever it is you&#39;re needing the exceptions for, otherwise your logs will become very large, very quickly.</p><h2 id="client-databases" tabindex="-1"><a class="header-anchor" href="#client-databases"><span>Client Databases</span></a></h2><p>By default Pterodactyl ships with the ability for clients to have their own per-server databases. If you wish to disable this ability, set <code>PTERODACTYL_CLIENT_DATABASES_ENABLED</code> to be <code>false</code>. Pterodactyl also attempts to create databases on a database host assigned to the current server&#39;s node but will use any host if one can&#39;t be found. If you would like to force a database to be created only on a host belonging to that server&#39;s node, set <code>PTERODACTYL_CLIENT_DATABASES_ALLOW_RANDOM</code> to be <code>false</code>.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>PTERODACTYL_CLIENT_DATABASES_ENABLED=true</span></span>
<span class="line"><span>PTERODACTYL_CLIENT_DATABASES_ALLOW_RANDOM=true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reverse-proxy-setup" tabindex="-1"><a class="header-anchor" href="#reverse-proxy-setup"><span>Reverse Proxy Setup</span></a></h2><p>If you are planning on running Pterodactyl behind a reverse proxy, either using NGINX or because you are using <a href="https://support.cloudflare.com/hc/en-us/articles/200170416-What-do-the-SSL-options-mean-" target="_blank" rel="noopener noreferrer">Cloudflare&#39;s Flexible SSL</a>, you will need to make a quick modification to the Panel to ensure things continue to work as expected. By default when you are using these reverse proxies your Panel will not understand how to properly handle requests and you&#39;ll most likely be unable to login, or will see security warnings in your browser console as it attempts to load insecure assets. This is because the internal logic the Panel is using to determine how links should be generated thinks it is running over HTTP, and not over HTTPS.</p><p>You will need to edit the <code>.env</code> file in the Panel&#39;s root directory to contain <code>TRUSTED_PROXIES=*</code> at minimum. We highly suggest providing a specific IP address (or comma separated list of IPs) rather than allowing <code>*</code>. For example, if your proxy is running on the same machine as the server, chances are that something like <code>TRUSTED_PROXIES=127.0.0.1</code> will work for you.</p><h3 id="nginx-specific-configuration" tabindex="-1"><a class="header-anchor" href="#nginx-specific-configuration"><span>NGINX Specific Configuration</span></a></h3><p>For Pterodactyl to properly respond to an NGINX reverse proxy, the NGINX <code>location</code> config must contain the following lines:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>proxy_set_header Host $host;</span></span>
<span class="line"><span>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>proxy_set_header X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span>proxy_redirect off;</span></span>
<span class="line"><span>proxy_buffering off;</span></span>
<span class="line"><span>proxy_request_buffering off;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cloudflare-specific-configuration" tabindex="-1"><a class="header-anchor" href="#cloudflare-specific-configuration"><span>Cloudflare Specific Configuration</span></a></h3><p>If you&#39;re using Cloudflare&#39;s Flexible SSL you should set <code>TRUSTED_PROXIES</code> to contain <a href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener noreferrer">their IP addresses</a>. Below is an example of how to set this.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>TRUSTED_PROXIES=103.21.244.0/22,103.22.200.0/22,103.31.4.0/22,104.16.0.0/12,108.162.192.0/18,131.0.72.0/22,141.101.64.0/18,162.158.0.0/15,172.64.0.0/13,173.245.48.0/20,188.114.96.0/20,190.93.240.0/20,197.234.240.0/22,198.41.128.0/17</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="increasing-the-editable-file-size" tabindex="-1"><a class="header-anchor" href="#increasing-the-editable-file-size"><span>Increasing the Editable File Size</span></a></h2><p>By default the Panel attempts to set a reasonable limit for editing files through the web based file manager. However, some users find it too restrictive and wish to increase the size. This is controlled by a configuration value that can also be set using the <code>.env</code> file. The default value is <code>50,000</code> bytes but this can be increased as you see fit.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>PTERODACTYL_FILES_MAX_EDIT_SIZE=50000</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="disable-or-modify-recaptcha" tabindex="-1"><a class="header-anchor" href="#disable-or-modify-recaptcha"><span>Disable or Modify ReCaptcha</span></a></h2><p>To disable reCAPTCHA on login or password reset, simply set <code>RECAPTCHA_ENABLED=false</code> in the environment file. This change will take effect immediately.</p><h3 id="using-your-own-keys" tabindex="-1"><a class="header-anchor" href="#using-your-own-keys"><span>Using Your Own Keys</span></a></h3><p>Pterodactyl comes preconfigured using a public set of reCAPTCHA keys but you may wish to use your own site specific keys. To do so, follow the instructions below.</p><ol><li>Visit <a href="https://www.google.com/recaptcha/admin#list" target="_blank" rel="noopener noreferrer">Google&#39;s reCAPTCHA Admin Console</a>.</li><li>Click &quot;Register New Site&quot; and fill in a name for your keys.</li><li>Choose <code>reCAPTCHA v2</code> and ensure that the option for <code>Invisible</code> is selected.</li><li>Include the domain that your panel is located on.</li><li>On the next page displayed, locate the &quot;Site Key&quot; and &quot;Secret Key&quot;. In Pterodactyl&#39;s control panel click on &quot;Settings&quot; and then the &quot;Advanced&quot; tab. Enter the keys in the boxes &quot;Site Key&quot; and &quot;Secret Key&quot;, respectively.</li></ol><div class="hint-container warning"><p class="hint-container-title">Disabling Domain Verification</p><p>If you do not want reCAPTCHA to verify the domain making the validation request you can uncheck &quot;Verify the origin of reCaptcha solution&quot; under &quot;Advanced Settings&quot; after generating your key.</p></div>`,27)]))}const d=i(o,[["render",s],["__file","configuration.html.vue"]]),h=JSON.parse(`{"path":"/panel/0.7/configuration.html","title":"Environment Configuration","lang":"zh-CN","frontmatter":{"head":[["meta",{"name":"robots","content":"noindex"}],["meta",{"property":"og:url","content":"https://pterodactyl.top/panel/0.7/configuration.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Environment Configuration"}],["meta",{"property":"og:description","content":"Environment Configuration Pterodactyl's environment settings are configured and stored in an environment file — .env — located in the installation root directory — generally /va..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-21T05:37:28.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-21T05:37:28.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Environment Configuration\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-21T05:37:28.000Z\\",\\"author\\":[]}"]],"description":"Environment Configuration Pterodactyl's environment settings are configured and stored in an environment file — .env — located in the installation root directory — generally /va..."},"headers":[{"level":2,"title":"Reporting All Exceptions","slug":"reporting-all-exceptions","link":"#reporting-all-exceptions","children":[]},{"level":2,"title":"Client Databases","slug":"client-databases","link":"#client-databases","children":[]},{"level":2,"title":"Reverse Proxy Setup","slug":"reverse-proxy-setup","link":"#reverse-proxy-setup","children":[{"level":3,"title":"NGINX Specific Configuration","slug":"nginx-specific-configuration","link":"#nginx-specific-configuration","children":[]},{"level":3,"title":"Cloudflare Specific Configuration","slug":"cloudflare-specific-configuration","link":"#cloudflare-specific-configuration","children":[]}]},{"level":2,"title":"Increasing the Editable File Size","slug":"increasing-the-editable-file-size","link":"#increasing-the-editable-file-size","children":[]},{"level":2,"title":"Disable or Modify ReCaptcha","slug":"disable-or-modify-recaptcha","link":"#disable-or-modify-recaptcha","children":[{"level":3,"title":"Using Your Own Keys","slug":"using-your-own-keys","link":"#using-your-own-keys","children":[]}]}],"git":{"createdTime":1533180624000,"updatedTime":1721540248000,"contributors":[{"name":"Dane Everitt","username":"Dane Everitt","email":"dane@daneeveritt.com","commits":2,"url":"https://github.com/Dane Everitt"},{"name":"DiscoverSquishy","username":"DiscoverSquishy","email":"noaimi2214@gmail.com","commits":1,"url":"https://github.com/DiscoverSquishy"},{"name":"AlienSteel","username":"AlienSteel","email":"tyko@brising.se","commits":1,"url":"https://github.com/AlienSteel"},{"name":"Phyremaster","username":"Phyremaster","email":"48633331+Phyremaster@users.noreply.github.com","commits":1,"url":"https://github.com/Phyremaster"},{"name":"Jakob Schrettenbrunner","username":"Jakob Schrettenbrunner","email":"dev@schrej.net","commits":1,"url":"https://github.com/Jakob Schrettenbrunner"},{"name":"飒爽师叔","username":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":2,"url":"https://github.com/飒爽师叔"},{"name":"Daniel Barton","username":"Daniel Barton","email":"danielb@purpleflaghosting.com","commits":1,"url":"https://github.com/Daniel Barton"}]},"readingTime":{"minutes":2.74,"words":822},"filePathRelative":"panel/0.7/configuration.md","localizedDate":"2018年8月2日","autoDesc":true}`);export{d as comp,h as data};
