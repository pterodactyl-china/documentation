import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as e,o as n}from"./app-Cuoamz1B.js";const t={};function l(h,s){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="配置-mysql" tabindex="-1"><a class="header-anchor" href="#配置-mysql"><span>配置 MySQL</span></a></h1><h2 id="为翼龙创建数据库" tabindex="-1"><a class="header-anchor" href="#为翼龙创建数据库"><span>为翼龙创建数据库</span></a></h2><p>MySQL 是翼龙面板的核心组件，但如果你以前没有配置过 MySQL，你可能会在配置的过程中感到混乱。这是一个非常基础的教程，只说明如何使用 MySQL 为面板配置好一个数据库。如果你有兴趣学习更多关于 MySQL 的知识，可以在网上找到很多很好的教程。</p><h3 id="登录" tabindex="-1"><a class="header-anchor" href="#登录"><span>登录</span></a></h3><p>首先我们需要登录到 MySQL 的命令行，我们需要在此命令行执行一些语句来配置数据库。登录到 MySQL 命令行十分简单，只需要输入下面的命令，然后提供安装 MySQL 时设置的 root 账户密码。若没有设置密码，您很可能只需按 Enter (回车) 键，因为没有设置密码</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">If</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> using</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MariaDB (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">v11</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">+)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mariadb -u </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">If</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> using</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MySQL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mysql -u </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建用户" tabindex="-1"><a class="header-anchor" href="#创建用户"><span>创建用户</span></a></h3><p>为了安全和适应 MySQL 5.7 的改变，你需要为面板创建一个新用户，为了做到这一点，我们需要让 MySQL 知道 mysql 数据库信息。</p><p>接下来，我们会创建一个名为 <code>pterodactyl</code> 的用户，并允许从 localhost 登录，你也可以用 <code>%</code> 来允许所有IP登录或者输入数字IP。同样的，我们还将密码设置为 <code>somePassword</code>。</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 记得将下面的 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;somePassword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 设为特定于此账号的独有密码。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> USER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &#39;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pterodactyl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&#39;@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> IDENTIFIED </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;somePassword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建数据库" tabindex="-1"><a class="header-anchor" href="#创建数据库"><span>创建数据库</span></a></h3><p>接下来, 我们需要为面板创建一个数据库. 在本教程中，我们会把数据库命名为 <code>panel</code>, 但你也可以将此数据库命名为其他名字。</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DATABASE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> panel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="分配权限" tabindex="-1"><a class="header-anchor" href="#分配权限"><span>分配权限</span></a></h3><p>最后，我们需要让 MySQL 知道，翼龙用户有权限访问去访问此数据库。要做到这一点，我们只需要运行下面的命令。</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GRANT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ALL PRIVILEGES </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> panel.* </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;pterodactyl&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="为节点创建数据库主机" tabindex="-1"><a class="header-anchor" href="#为节点创建数据库主机"><span>为节点创建数据库主机</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>本节介绍如何创建一个具有创建和修改用户权限的 MySQL 用户，这允许面板在给定主机上创建每个服务器的数据库。</p></div><h3 id="创建用户-1" tabindex="-1"><a class="header-anchor" href="#创建用户-1"><span>创建用户</span></a></h3><p>如果您的数据库与面板或者守护进程安装在不同的主机上，请确保使用面板运行的主机IP地址(或者直接使用通配符 <code>%</code>)而不是 <code>127.0.0.1</code>。 否则你会收到一个连接拒绝的错误。</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 记得把 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;pterodactyluser&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 和 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;somePassword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 设为独有的账号密码。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> USER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &#39;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pterodactyluser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&#39;@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> IDENTIFIED </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;somepassword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="分配权限-1" tabindex="-1"><a class="header-anchor" href="#分配权限-1"><span>分配权限</span></a></h3><p>下面的命令将使你新创建的用户具备创建其他用户，以及创建和销毁数据库的能力。如上所述，确保 <code>127.0.0.1</code> 换成跟上面命令中使用的 IP 地址同样喔~</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GRANT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ALL PRIVILEGES </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *.* </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;pterodactyluser&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WITH</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GRANT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OPTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="允许外部访问数据库" tabindex="-1"><a class="header-anchor" href="#允许外部访问数据库"><span>允许外部访问数据库</span></a></h3><p>你有可能需要允许外部访问这个 MySQL 实例，以便允许服务器连接到它。要做到这一点，我们需要修改 <code>my.cnf</code> 来达到这个目的，它的位置取决于你的操作系统和 MySQL 安装方式，你可以输入 <code>find /etc -iname my.cnf</code> 来找到它。</p><p>打开 <code>my.cnf</code>，将下面的文本添加到文件底部并保存：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[mysqld]</span></span>
<span class="line"><span>bind-address=0.0.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>重启 MySQL/MariaDB 以应用这些变化。这将覆盖默认的 MySQL 配置，在默认情况下，它只接受来自 localhost 的请求。更新这个将允许所有接口的连接，因此也允许外部连接。请确保在你的防火墙中允许 MySQL 端口（默认为3306）。</p><p>如果你的数据库和 Wings 在同一台主机上，并且不需要外部访问，你也可以使用 <code>docker0</code> 接口的IP地址而不是 <code>127.0.0.1</code>。这个IP地址可以通过运行 <code>ip addr | grep docker0</code> 找到，它可能看起来像 <code>172.x.x.x</code>。</p><p>从 MySQL 8.0.13 / MariaDB 10.11 或更高版本开始，<code>bind_address</code> 现在还接受以逗号分隔的接口列表，以便更好地控制其监听的接口以及不监听的接口。</p>`,31)])])}const p=i(t,[["render",l]]),k=JSON.parse('{"path":"/tutorials/mysql_setup.html","title":"配置 MySQL","lang":"zh-CN","frontmatter":{"description":"配置 MySQL 为翼龙创建数据库 MySQL 是翼龙面板的核心组件，但如果你以前没有配置过 MySQL，你可能会在配置的过程中感到混乱。这是一个非常基础的教程，只说明如何使用 MySQL 为面板配置好一个数据库。如果你有兴趣学习更多关于 MySQL 的知识，可以在网上找到很多很好的教程。 登录 首先我们需要登录到 MySQL 的命令行，我们需要在此命...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"配置 MySQL\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-09T10:27:42.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://pterodactyl.top/tutorials/mysql_setup.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"配置 MySQL"}],["meta",{"property":"og:description","content":"配置 MySQL 为翼龙创建数据库 MySQL 是翼龙面板的核心组件，但如果你以前没有配置过 MySQL，你可能会在配置的过程中感到混乱。这是一个非常基础的教程，只说明如何使用 MySQL 为面板配置好一个数据库。如果你有兴趣学习更多关于 MySQL 的知识，可以在网上找到很多很好的教程。 登录 首先我们需要登录到 MySQL 的命令行，我们需要在此命..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-09T10:27:42.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-09T10:27:42.000Z"}]]},"git":{"createdTime":1532407839000,"updatedTime":1746786462000,"contributors":[{"name":"Dane Everitt","username":"","email":"dane@daneeveritt.com","commits":4},{"name":"DiscoverSquishy","username":"DiscoverSquishy","email":"noaimi2214@gmail.com","commits":1,"url":"https://github.com/DiscoverSquishy"},{"name":"DomiiBunn","username":"DomiiBunn","email":"51760394+DomiiBunn@users.noreply.github.com","commits":10,"url":"https://github.com/DomiiBunn"},{"name":"Jan","username":"Jan","email":"j.schipper1@hotmail.de","commits":4,"url":"https://github.com/Jan"},{"name":"Michael (Parker) Parker","username":"","email":"parkervcp@gmail.com","commits":1},{"name":"Michael Parker","username":"","email":"parkervcp@gmail.com","commits":1},{"name":"Brendan","username":"Brendan","email":"jbrendan70@outlook.com","commits":2,"url":"https://github.com/Brendan"},{"name":"Alex","username":"Alex","email":"admin@softwarenoob.com","commits":1,"url":"https://github.com/Alex"},{"name":"Patrik Lundin","username":"","email":"patrik@sigterm.se","commits":2},{"name":"Marco5699","username":"Marco5699","email":"ngkin36@gmail.com","commits":2,"url":"https://github.com/Marco5699"},{"name":"vlssu","username":"vlssu","email":"43847794+vlssu@users.noreply.github.com","commits":2,"url":"https://github.com/vlssu"},{"name":"Boy132","username":"Boy132","email":"Boy132@users.noreply.github.com","commits":1,"url":"https://github.com/Boy132"},{"name":"Jcodeerd","username":"Jcodeerd","email":"68161666+Jcodeerd@users.noreply.github.com","commits":4,"url":"https://github.com/Jcodeerd"},{"name":"Michael","username":"Michael","email":"MineBomber@gmx.at","commits":7,"url":"https://github.com/Michael"}]},"readingTime":{"minutes":3.38,"words":1015},"filePathRelative":"tutorials/mysql_setup.md","autoDesc":true}');export{p as comp,k as data};
